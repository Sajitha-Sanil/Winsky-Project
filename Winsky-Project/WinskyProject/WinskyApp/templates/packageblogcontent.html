{% extends 'dashboard.html'%}
{% load static %}
{% get_static_prefix as dir %}
{% block content %}
<!-- End Sidebar Modal -->
<style>
    body {
      font-family: Arial, sans-serif;
  
      margin: 0;
      padding: 0;
    }
    #drop-area {
      border: 2px dashed #ccc;
      border-radius: 8px;
      padding: 20px;
      cursor: pointer;
    }
    #image-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
    }
    .image-preview {
      margin: 10px;
      display: inline-block;
      text-align: center;
    }
    .image-preview img {
      max-width: 100px;
      max-height: 100px;
    }
    .drag-drop-icon {
        font-size: 58px;
        text-align: center; /* Adjust the size as needed */
      }
      .dropdown-item {
        display: flex;
        align-items: center;
        margin: 5px;
      }
  
      input[type="radio"] {
        margin-right: 10px;
      }
      .image-container {
    display: flex;
    gap: 10px; /* Add some spacing between images */
  }
      </style>

                <div class="dashboard-innerbox">
                            <div class="inner-page-sec">
                              <div class="description-sec">
                                <h2>New Package Blog</h2>
                                <div class="row">
                                    {% if messages %}
                                    {% for message in messages %}
                                      {% if message.tags == 'success' %}
                                        <div class="alert alert-success" role="alert">
                                          {{ message }}
                                        </div>
                                      {% elif message.tags == 'error' %}
                                        <div class="alert alert-danger" role="alert">
                                          {{ message }}
                                        </div>
                                      {% endif %}
                                    {% endfor %}
                                  {% endif %}
                                    <div class="col-lg-12 col-md-12">
                                        <div class="inner-card">
                                            <div class="inner-card-body">
                                                <div class="product-info">
                                                  
                                                  
                                                    <form id="form4" method="post" enctype="multipart/form-data" action="{% url 'create_package' %}">
                                                        {% csrf_token %}
                                                        <div class="product-group">
                                                            <div class="row">
                                                                <div class="col-sm-6">
                                                                    <div class="mb-3">
                                                                        <label class="form-label">Package</label>
                                                                        <select class="form-control" id="package" required name="package">
                                                                            <option value="">Select</option>
                                                                            {% for package in packages %}
                                                                            <option value="{{ package.id }}">{{ package.name }}</option>
                                                                            {% endfor %}
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-6">
                                                                    <div class="mb-3">
                                                                        <label class="form-label">Image:</label><br>
                                                                        <input type="file" class="form-control form-control-file" id="image" name="image" multiple>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                    
                                                            <div class="row">
                                                                <div class="col-sm-6">
                                                                    <div class="mb-3">
                                                                        <label class="form-label">Image Caption:</label>
                                                                        <input type="text" class="form-control" required id="image_caption" name="image_caption">
                                                                    </div>
                                                                </div>
                                                              
                                                                    <div class="col-sm-6">
                                                                        <div class="mb-3">
                                                                            <label class="form-label">Image Description:</label>
                                                                            <input type="text" class="form-control" required id="image_description" name="image_description">
                                                                        </div>
                                                                    </div>
                                                                    <div class="row">
                                                                        <div class="col-sm-6">
                                                                            <div class="mb-3">
                                                                                <label class="form-label">Country:</label>
                                                                                <input type="text" class="form-control" value="{{ package.country }}" id="country" name="country">
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-sm-6">
                                                                            <div class="mb-3">
                                                                                <label class="form-label">Price/Per Person:</label>
                                                                                <input type="text" class="form-control" value="{{ package.rate }}" id="price" name="rate">
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-sm-12">
                                                                                <div class="mb-3">
                                                                                    <label class="form-label">Gallery Images:</label><br>
                                                                                    
                                                                                    <div id="drop-area">
                                                                                        <p class="text-center">Drag and drop images here or click to select</p>
                                                                                        <div class="drag-drop-icon">
                                                                                            <i class="bx bx-cloud-upload"></i>
                                                                                        </div>
                                                                                        <input type="file" id="image-input" name="image1[]" accept="image/*" multiple style="display: none;">
                                                                                    </div>
                                                                                    <div class="mt-3 mb-3">
                                                                                        <p>Selected Images:</p>
                                                                                        <div id="selected-images-list"></div>
                                                                                    </div>
                                                                              <div class="dropdown-menu" aria-labelledby="selected-images-dropdown">
                                                                                <div id="selected-images-list"></div>
                                                                              </div>
                                                                            </div>
                                                                          </div>
                                                                        </div>

                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                <div class="mb-3">
                                                                                    <label class="form-label">Famous Places:</label>
                                                                                    <textarea class="form-control" rows="3"  id="famous_place" name="famous_place"></textarea>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                <div class="mb-3">
                                                                                    <label class="form-label">City Visit:</label>
                                                                                    <textarea type="text" class="form-control" rows="3"  id="city_visit" name="city_visit"></textarea>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                <div class="mb-3">
                                                                                    <label class="form-label">Rooms:</label>
                                                                                    <textarea type="text" class="form-control" rows="3"   id="rooms" name="rooms"></textarea>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                <div class="mb-3">
                                                                                    <label class="form-label">Food:</label>
                                                                                    <textarea type="text" class="form-control" rows="3"   id="food" name="food"></textarea>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    <div class="row">
                                                                    <div class="col-sm-4">
                                                                        <div class="mb-3">
                                                                            <label class="form-label">People:</label>
                                                                            <input type="text" class="form-control" value="{{package.people}}" id="people" name="people">
                                                                        </div>
                                                                    </div>
                                                           
                                                        
    
                                                                    <div class="col-sm-4">
                                                                        <div class="mb-3">
                                                                            <label class="form-label">Days:</label>
                                                                            <input type="text" class="form-control" value="{{package.days}}" id="days" name="days">
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-4">
                                                                        <div class="mb-3">
                                                                            <label class="form-label">Nights:</label>
                                                                            <input type="text" class="form-control" id="nights" value="{{package.nights}}" name="nights">
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                        
                                                                <div class="row">
                                                                    <div class="col-sm-12 text-end">
                                                                        <button class="btn btn-secondary mx-3" type="submit">ADD</button>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </form>

                                                </div>
                                            </div>
                                        </div> 
                                    </div>
                                    

                                </div>
                            </div>
                           
                                <div class="row bg-row">
                                    <div class="col-md-5 col-lg-5 pocket-help">
                                        <h2>Ask pocket Friendly for Help 24/7</h2>
                                        <h6>Get In Touch : </h6>
                                      
                                        <div class="number-block"> <a href="tel:+ +971 585893348"> +971585893348 </a>  
                                           </div>
                                        </div>
                                </div>
                                </div>
                          
              
                   
              </div>
              </div>
			</div>
		</section>
		<!-- End Sign In Area -->
        
<!-- JavaScript code -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Get the drop area and hidden file input element
    const dropArea = document.getElementById('drop-area');
    const fileInput = document.getElementById('image-input');
    const selectedImagesList = document.getElementById('selected-images-list');
  
    // Add event listeners for drag events
    dropArea.addEventListener('dragover', handleDragOver);
    dropArea.addEventListener('drop', handleDrop);
    dropArea.addEventListener('click', handleClick);
    fileInput.addEventListener('change', handleFileSelect);
  
    // Handle drag over event
    function handleDragOver(event) {
      event.preventDefault();
      dropArea.classList.add('drag-over');
    }
  
    // Handle drop event
    function handleDrop(event) {
      event.preventDefault();
      dropArea.classList.remove('drag-over');
  
      // Get the dropped files
      const files = event.dataTransfer.files;
  
      // Display the selected images
      displaySelectedImages(files);
    }
  
    // Handle click event on the drop area
    function handleClick() {
      fileInput.click();
    }
  
    // Handle file select event
    function handleFileSelect(event) {
      const files = event.target.files;
  
      // Display the selected images
      displaySelectedImages(files);
    }
  
    // Display the selected images
    function displaySelectedImages(files) {
    selectedImagesList.innerHTML = '';

    // Create a container for the images
    const imageContainer = document.createElement('div');
    imageContainer.classList.add('image-container');

    for (let i = 0; i < files.length; i++) {
      const file = files[i];

      // Create image element
      const image = document.createElement('img');
      image.src = URL.createObjectURL(file); // Set the image source

      // Set the desired width and height
      image.style.width = '50px';
      image.style.height = '50px';

      // Append the image element to the container
      imageContainer.appendChild(image);
    }

    // Append the container to the selected images list
    selectedImagesList.appendChild(imageContainer);
  }
  </script>
{% endblock %}